<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../App.js"></script>
    <script src="../Routes/userController.js"></script>
    <title>Document</title>
</head>
<body>
    <h1>Add Family Member</h1>
    <button id="addFamilyMemberBtn">Add Family Member</button>
    <form id="familyMemberForm" style="display: none;" action="/addFamMem/<%=registeredUsername%>" method="POST">
        <label for="name">Name:</label>
        <input type="text" id="name" name="username" required><br><br>
        
        <label for="age">Age:</label>
        <input type="number" id="age" name="age" required><br><br>
        
        <label for="gender">Gender:</label>
        <input type="text" id="gender" name="gender" required><br><br>
        
        <label for="relation">Relation:</label>
        <input type="text" id="relation" name="relation" required><br><br>
        
        <label for="nationalID">National ID:</label>
        <input type="text" id="nationalID" name="nationalID" required><br><br>
        
        <button type="submit" id="submitButton">Submit</button>
    </form>

    <script>
        const addFamilyMemberBtn = document.getElementById('addFamilyMemberBtn');
        const familyMemberForm = document.getElementById('familyMemberForm');
        const nameInput = document.getElementById('name');
        const submitButton = document.getElementById('submitButton');

        // Check if a username is stored in Local Storage when the page loads
        const storedUsername = localStorage.getItem('username');
        if (storedUsername) {
            nameInput.value = storedUsername;
        }

        addFamilyMemberBtn.addEventListener('click', () => {
            // Toggle the visibility of the form
            if (familyMemberForm.style.display === 'none') {
                familyMemberForm.style.display = 'block';
            } else {
                familyMemberForm.style.display = 'none';
            }
        });

        // Add an event listener to the form submission to save the username in Local Storage
        familyMemberForm.addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent form submission

            // Continue with the form submission (you may want to send the data to the server here)
            familyMemberForm.submit();
        });
    </script>
</body>
</html>
